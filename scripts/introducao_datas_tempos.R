# Criação do Objeto com datas e tempos

datas_e_tempos <- c("1999-05-22 01:45", "2001-08-15 15:22", 
                    "2008-04-26 07:03",  "2002-01-15 16:04", 
                    "2020-11-13 03:56")


# Começo criando um ojeto no formato em data e tempo
(str(datas <- as.Date(datas_e_tempos) ) )

# Resultados
# Date[1:5], format: "1999-05-22" "2001-08-15" "2008-04-26" "2002-01-15" "2020-11-13"
# NULL

# Conversão para POSIXct
(str(datas_Xct <- as.POSIXct(datas_e_tempos) ) )

# Resultados
# POSIXct[1:5], format: "1999-05-22 01:45:00" "2001-08-15 15:22:00" "2008-04-26 07:03:00" "2002-01-15 16:04:00" "2020-11-13 03:56:00"
# NULL

# Conversão para POSIXlt
(str(datas_Xlt <- as.POSIXlt(datas_e_tempos)) )

# Resultados
# POSIXlt[1:5], format: "1999-05-22 01:45:00" "2001-08-15 15:22:00" "2008-04-26 07:03:00" "2002-01-15 16:04:00" "2020-11-13 03:56:00"
# NULL

### Extrações de Componentes

library(lubridate)

year(datas) 
# Resultados dos anos :
# [1] 1999 2001 2008 2002 2020

minutes(datas_Xlt)
# Resultados da extração dos minutos
# [1] "927348300M 0S"  "997899720M 0S"  "1209204180M 0S" "1011121440M 0S" "1605250560M 0S"

wday(datas_Xlt, label = T, abbr = T)
# Resultados da extração dos dias da semana abreviados
# [1] sáb qua sáb ter sex
# Levels: dom < seg < ter < qua < qui < sex < sáb

isoweek(datas_Xct) # semana ISO 8601
# Resultados da extração do número da semana
# [1] 20 33 17  3 46


### Operações

# Criando uma sequência
(minha_sequencia <- seq(as.Date('1999-05-22 01:45'), as.Date('2002-01-15 16:04'), by = "week") ) 
# Resultados
# [1] "1999-05-22" "1999-05-29" "1999-06-05" "1999-06-12" "1999-06-19" "1999-06-26" "1999-07-03" "1999-07-10" "1999-07-17" "1999-07-24" "1999-07-31"
# [12] "1999-08-07" "1999-08-14" "1999-08-21" "1999-08-28" "1999-09-04" "1999-09-11" "1999-09-18" "1999-09-25" "1999-10-02" "1999-10-09" "1999-10-16"
# [23] "1999-10-23" "1999-10-30" "1999-11-06" "1999-11-13" "1999-11-20" "1999-11-27" "1999-12-04" "1999-12-11" "1999-12-18" "1999-12-25" "2000-01-01"
# [34] "2000-01-08" "2000-01-15" "2000-01-22" "2000-01-29" "2000-02-05" "2000-02-12" "2000-02-19" "2000-02-26" "2000-03-04" "2000-03-11" "2000-03-18"
# [45] "2000-03-25" "2000-04-01" "2000-04-08" "2000-04-15" "2000-04-22" "2000-04-29" "2000-05-06" "2000-05-13" "2000-05-20" "2000-05-27" "2000-06-03"
# [56] "2000-06-10" "2000-06-17" "2000-06-24" "2000-07-01" "2000-07-08" "2000-07-15" "2000-07-22" "2000-07-29" "2000-08-05" "2000-08-12" "2000-08-19"
# [67] "2000-08-26" "2000-09-02" "2000-09-09" "2000-09-16" "2000-09-23" "2000-09-30" "2000-10-07" "2000-10-14" "2000-10-21" "2000-10-28" "2000-11-04"
# [78] "2000-11-11" "2000-11-18" "2000-11-25" "2000-12-02" "2000-12-09" "2000-12-16" "2000-12-23" "2000-12-30" "2001-01-06" "2001-01-13" "2001-01-20"
# [89] "2001-01-27" "2001-02-03" "2001-02-10" "2001-02-17" "2001-02-24" "2001-03-03" "2001-03-10" "2001-03-17" "2001-03-24" "2001-03-31" "2001-04-07"
# [100] "2001-04-14" "2001-04-21" "2001-04-28" "2001-05-05" "2001-05-12" "2001-05-19" "2001-05-26" "2001-06-02" "2001-06-09" "2001-06-16" "2001-06-23"
# [111] "2001-06-30" "2001-07-07" "2001-07-14" "2001-07-21" "2001-07-28" "2001-08-04" "2001-08-11" "2001-08-18" "2001-08-25" "2001-09-01" "2001-09-08"
# [122] "2001-09-15" "2001-09-22" "2001-09-29" "2001-10-06" "2001-10-13" "2001-10-20" "2001-10-27" "2001-11-03" "2001-11-10" "2001-11-17" "2001-11-24"
# [133] "2001-12-01" "2001-12-08" "2001-12-15" "2001-12-22" "2001-12-29" "2002-01-05" "2002-01-12"

datas_Xct + minutes(360) # período
# Resultados
# [1] "1999-05-22 07:45:00 -03" "2001-08-15 21:22:00 -03" "2008-04-26 13:03:00 -03" "2002-01-15 22:04:00 -03" "2020-11-13 09:56:00 -03"

datas_Xct + dminutes(290) # duração
# Resultados
# [1] "1999-05-22 06:35:00 -03" "2001-08-15 20:12:00 -03" "2008-04-26 11:53:00 -03" "2002-01-15 20:54:00 -03" "2020-11-13 08:46:00 -03"

intervalo <- as.interval(datas_Xlt[2], datas_Xlt[5]) # transforma em intervalo

now() %within% intervalo  # investiga se está dentro do intervalo
# Resultados
# [1] FALSE














